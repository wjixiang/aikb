@tailwind base;

@custom-variant dark (&:is(.dark *));
@tailwind components;
@tailwind utilities;

:root {
  --h1: 210 100% 50%; /* 鲜亮蓝色 */
  --h2: 160 75% 45%; /* 翠绿色 */
  --h3: 330 85% 60%; /* 玫红色 */
  --link: 263.4 70% 50.4%;
  --link-nonexistent: 263.4 70% 65.4%;
  --background: 200.6 100% 100%;
  --foreground: 200.6 5% 10%;
  --card: 200.6 50% 100%;
  --card-foreground: 200.6 5% 15%;
  --popover: 200.6 100% 100%;
  --popover-foreground: 200.6 100% 10%;
  --primary: 200.6 94.4% 56.1%;
  --primary-foreground: 0 0% 0%;
  --secondary: 200.6 30% 90%;
  --secondary-foreground: 0 0% 0%;
  --muted: 162.6 30% 95%;
  --muted-foreground: 200.6 5% 40%;
  --accent: 162.6 30% 90%;
  --accent-foreground: 200.6 5% 15%;
  --destructive: 0 100% 50%;
  --destructive-foreground: 200.6 5% 100%;
  --border: 200.6 30% 82%;
  --input: 200.6 30% 50%;
  --ring: 200.6 94.4% 86.1%;
  --radius: 0.5rem;

  /* Heatmap colors (Light Theme) */
  --heatmap-empty: 210 14% 96%; /* #ebedf0 */
  --heatmap-scale-1: 90 60% 80%; /* #c6e48b */
  --heatmap-scale-2: 100 45% 60%; /* #7bc96f */
  --heatmap-scale-3: 110 65% 40%; /* #239a3b */
  --heatmap-scale-4: 120 60% 20%; /* #196127 */
  --heatmap-scale-5: 130 60% 10%; /* #0d3314 */

  /* Quiz option colors (Light Theme) */
  --quiz-user-correct: 120 75% 50%; /* Green - User answered and option is correct */
  --quiz-missed-correct: 120 50% 70%; /* Light green - User didn't answer and option is correct */
  --quiz-user-incorrect: 0 100% 50%; /* Red - User answered and option is incorrect */
  --quiz-default-incorrect: 210 14% 90%; /* Light gray - User didn't answer and option is incorrect */

  --popover: 200.6 30% 90%;

  --sidebar: hsl(0 0% 98%);

  --sidebar-foreground: hsl(240 5.3% 26.1%);

  --sidebar-primary: hsl(240 5.9% 10%);

  --sidebar-primary-foreground: hsl(0 0% 98%);

  --sidebar-accent: hsl(240 4.8% 95.9%);

  --sidebar-accent-foreground: hsl(240 5.9% 10%);

  --sidebar-border: hsl(220 13% 91%);

  --sidebar-ring: hsl(217.2 91.2% 59.8%);
  --cell-size: 50px;
}

.dark {
  --h1: 210 80% 55%; /* 稍柔和的蓝色 */
  --h2: 160 70% 40%; /* 深翠绿 */
  --h3: 330 75% 55%; /* 暗玫红 */
  --link: 255.1 91.7% 86.3%;
  --link-nonexistent: 255.1 91.7% 64.3%;
  --background: 200.6 50% 10%;
  --foreground: 200.6 5% 100%;
  --card: 200.6 50% 10%;
  --card-foreground: 200.6 5% 100%;
  --popover: 200.6 50% 10%;
  --popover-foreground: 200.6 5% 100%;
  --primary: 200.6 94.4% 86.1%;
  --primary-foreground: 0 0% 0%;
  --secondary: 200.6 30% 20%;
  --secondary-foreground: 0 0% 100%;
  --muted: 162.6 30% 25%;
  --muted-foreground: 200.6 5% 65%;
  --accent: 162.6 30% 25%;
  --accent-foreground: 200.6 5% 95%;
  --destructive: 0 100% 50%;
  --destructive-foreground: 200.6 5% 100%;
  --border: 200.6 30% 50%;
  --input: 200.6 30% 50%;
  --ring: 200.6 94.4% 86.1%;
  --radius: 0.5rem;

  /* Heatmap colors (Dark Theme) - Adjusted to be more visible on dark background */
  --heatmap-empty: 210 10% 20%;
  --heatmap-scale-1: 120 40% 20%;
  --heatmap-scale-2: 120 40% 30%;
  --heatmap-scale-3: 120 40% 40%;
  --heatmap-scale-4: 120 40% 50%;
  --heatmap-scale-5: 120 40% 60%;

  /* Quiz option colors (Dark Theme) */
  --quiz-user-correct: 120 60% 40%; /* Green - User answered and option is correct */
  --quiz-missed-correct: 120 40% 30%; /* Dark green - User didn't answer and option is correct */
  --quiz-user-incorrect: 0 100% 50%; /* Red - User answered and option is incorrect */
  --quiz-default-incorrect: 210 10% 25%; /* Dark gray - User didn't answer and option is incorrect */

  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* 确保标题颜色使用新定义的彩色变量 */
h1 {
  color: hsl(var(--h1));
}
h2 {
  color: hsl(var(--h2));
}
h3 {
  color: hsl(var(--h3));
}

/* 添加到你的样式文件中 */
.admonition {
  margin: 1.5em 0;
  padding: 0;
  overflow: hidden;
  border-radius: 0.3rem;
  box-shadow:
    0 0.2rem 0.5rem rgba(0, 0, 0, 0.05),
    0 0 0.05rem rgba(0, 0, 0, 0.1);
}

.admonition-title {
  position: relative;
  padding: 0.6rem 1rem;
  font-weight: 700;
  background-color: rgba(0, 0, 0, 0.1);
}

.admonition-content {
  padding: 1rem;
}

/* 颜色主题 */
.admonition.red {
  border-left: 0.3rem solid #f44336;
}
.admonition.red .admonition-title {
  background-color: rgba(244, 67, 54, 0.1);
  color: #f44336;
}

/* 添加 note 样式 */
.admonition.note {
  border-left: 0.3rem solid #448aff;
}
.admonition.note .admonition-title {
  background-color: rgba(68, 138, 255, 0.1);
  color: #448aff;
}

/* 针对特定类型的 callout */
.admonition-pdf {
  border-left: 0.3rem solid #ff5722;
}
.admonition-pdf .admonition-title {
  background-color: rgba(255, 87, 34, 0.1);
  color: #ff5722;
}

/* 确保行内公式正确显示 */
.mjx-inline {
  display: inline-block !important;
  margin: 0 !important;
  vertical-align: middle !important;
}

/* 块级公式可以保持原样 */
.mjx-block {
  display: block;
  margin: 1em 0;
}

/* 针对remark-math生成的元素 */
.math-inline-display {
  display: inline-block !important;
  vertical-align: middle !important;
}

/* 设置embedding样式 */
.embed {
  border-left: 0.2rem solid hsl(var(--primary));
  padding-left: 10px;
}

/* Calendar Heatmap styles */
.react-calendar-heatmap .color-empty {
  fill: hsl(var(--heatmap-empty));
}

.react-calendar-heatmap .color-scale-1 {
  fill: hsl(var(--heatmap-scale-1));
}

.react-calendar-heatmap .color-scale-2 {
  fill: hsl(var(--heatmap-scale-2));
}

.react-calendar-heatmap .color-scale-3 {
  fill: hsl(var(--heatmap-scale-3));
}

.react-calendar-heatmap .color-scale-4 {
  fill: hsl(var(--heatmap-scale-4));
}

.react-calendar-heatmap .color-scale-5 {
  fill: hsl(var(--heatmap-scale-5));
}

.allow_copy_content {
  width: 0;
  height: 0;
  overflow: hidden;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
